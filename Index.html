<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" href="/css/style.css" />
		<link rel="icon" href="./images//favicon.png" type="image/x-icon" />
		<title>Login</title>
	</head>
	<body>
		<div class="regContainer" id="loginContainer">
			<div class="reg">
				<div class="regLogo">₦airaland Forum</div>
				<span class="regSlogan">
					Welcome back to the land of great knowledge and voices
				</span>

				<form id="loginForm">
					<input
						type="text"
						class="username"
						placeholder="Name, Username" />
					<input
						type="password"
						class="password"
						placeholder="Password" />

					<div class="checkboxContainer">
						<label for="">
							<input type="checkbox" class="checkbox" />
							Keep me logged in
						</label>
					</div>

					<button class="Submit" type="submit">Login</button>
					<a href="#">Forgotten password?</a>
				</form>

				<div class="footer">
					<a class="signuptag" href="signup.html">Sign up</a>

					<div class="country">
						<img
							src="./images/flag.svg"
							alt="country flag"
							width="20px" />
						<a href="#">Nigeria</a>
					</div>
				</div>
			</div>

			<div class="regImage">
				<img src="./images//Registration_image.png" alt="regImage" />
			</div>

			<div id="popOverlay" class="popOverlay">
				<div id="popModal" class="popModal">
					<svg
						xmlns="http://www.w3.org/2000/svg"
						height="30"
						width="30"
						viewBox="0 0 384 512">
						<path
							fill="#ff0000"
							d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z" />
					</svg>
					<p id="popMessage">Invalid password or username</p>
				</div>
			</div>
		</div>

		<div class="indexLoaderOverlay">
			<span class="dynamicSpan">₦</span>
		</div>

		<script src="app.js"></script>
		<script>
			document.addEventListener("DOMContentLoaded", function () {
				const indexLoaderOverlay = document.querySelector(
					".indexLoaderOverlay"
				);
				const mainContent = document.querySelector("#loginContainer");

				// Check if the code has already been executed
				const codeExecuted = sessionStorage.getItem("codeExecuted");

				if (!codeExecuted) {
					// Code has not been executed, execute it

					mainContent.style.display = "none";

					setTimeout(() => {
						indexLoaderOverlay.style.display = "none";
						mainContent.style.display = "flex";

						// Set the flag in sessionStorage to indicate that the code has been executed
						sessionStorage.setItem("codeExecuted", true);
					}, 4000);
				} else {
					// Code has already been executed, skip it
					indexLoaderOverlay.style.display = "none";
					mainContent.style.display = "flex";
				}

				function validateLogin(event) {
					event.preventDefault();

					const testUsername = "testuser";
					const testPassword = "testpassword";

					const usernameInput =
						document.querySelector(".username").value;
					const passwordInput =
						document.querySelector(".password").value;

					if (
						usernameInput.trim() === "" ||
						passwordInput.trim() === ""
					) {
						return;
					}

					if (
						usernameInput === testUsername &&
						passwordInput === testPassword
					) {
						// Redirect to the dashboard.html page
						window.location.href = "dashboard.html";
					} else {
						// Show the popOverlay div with error message for 4 seconds
						const popOverlay =
							document.getElementById("popOverlay");
						popOverlay.style.display = "block";
						setTimeout(function () {
							popOverlay.style.display = "none";
						}, 4000);
					}
				}

				// Attach the event listener to the form
				const loginForm = document.getElementById("loginForm");
				loginForm.addEventListener("submit", validateLogin);
			});
		</script>
	</body>
</html>
